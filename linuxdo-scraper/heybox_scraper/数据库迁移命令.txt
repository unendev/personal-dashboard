# å°é»‘ç›’çˆ¬è™« - æ•°æ®åº“è¿ç§»å‘½ä»¤

## é‡è¦è¯´æ˜
schema.prisma ä¸­å·²ç»åŒ…å«äº† heybox_posts å’Œ heybox_comments æ¨¡å‹å®šä¹‰
åªéœ€è¦æ‰§è¡Œè¿ç§»å‘½ä»¤å°†schemaåº”ç”¨åˆ°æ•°æ®åº“

## è¿ç§»å‘½ä»¤

### æ–¹æ³•1: å¼€å‘ç¯å¢ƒè¿ç§»ï¼ˆæ¨èï¼‰
```bash
npx prisma migrate dev --name add_heybox_tables
```

### æ–¹æ³•2: ç”Ÿäº§ç¯å¢ƒè¿ç§»
```bash
npx prisma migrate deploy
```

### æ–¹æ³•3: å¼ºåˆ¶æ¨é€schemaï¼ˆæ…ç”¨ï¼‰
```bash
npx prisma db push
```

## éªŒè¯è¿ç§»

### æ£€æŸ¥æ•°æ®åº“è¡¨
```bash
npx prisma studio
```

### ç”ŸæˆPrismaå®¢æˆ·ç«¯
```bash
npx prisma generate
```

## å¦‚æœè¿ç§»å¤±è´¥

### æ•°æ®åº“è¿æ¥é—®é¢˜
```bash
# æ£€æŸ¥DATABASE_URL
echo %DATABASE_URL%  # Windows
echo $DATABASE_URL   # Linux/Mac

# æµ‹è¯•è¿æ¥
npx prisma db pull
```

### é‡ç½®æ•°æ®åº“ï¼ˆè­¦å‘Šï¼šä¼šåˆ é™¤æ‰€æœ‰æ•°æ®ï¼‰
```bash
npx prisma migrate reset
```

## è¿ç§»åçš„è¡¨ç»“æ„

âœ… heybox_posts (ä¸»è¡¨)
   - id (String, Primary Key)
   - title, url, author, avatar_url
   - cover_image, content_summary
   - likes_count, comments_count, views_count
   - game_tag
   - core_issue, key_info (JSON), post_type
   - value_assessment, detailed_analysis
   - timestamp

âœ… heybox_comments (è¯„è®ºè¡¨)
   - id (String, Primary Key)
   - post_id (å¤–é”® â†’ heybox_posts.id)
   - author, content
   - likes_count, created_at
   - parent_id, depth
   - scraped_at

## æ³¨æ„äº‹é¡¹

1. âœ… Schemaå·²åœ¨ prisma/schema.prisma ç¬¬731-770è¡Œ
2. ğŸ”„ å¦‚é‡ç½‘ç»œé—®é¢˜ï¼Œå¯ç­‰å¾…åå†è¯•
3. ğŸ—„ï¸ GitHub Actionsä¼šè‡ªåŠ¨ä½¿ç”¨DATABASE_URL
4. ğŸ“¦ è¿ç§»æ–‡ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆåœ¨ prisma/migrations/

